name: 'SPA Deploy Action'
description: 'Upload Single Page Application (SPA) to CDN and deploy to NAIS'
inputs:
  team-name:
    description: 'Team name'
    required: true
  app-name:
    description: 'Application name'
    required: true
  source:
    description: 'Application source directory'
    required: true
  environment:
    description: 'Environment name'
    required: true
  ingress:
    description: 'Application ingress URL'
    required: true
  nais-deploy-apikey:
    description: 'NAIS deploy API key'
    required: false
    default: ""

outputs:
  url:
    description: "SPA URL"
    value: ${{ inputs.ingress }}

runs:
  using: "composite"
  steps:
	  - name: "spa-deploy/v1 removal notice"
      shell: bash
      run: |
        echo "::error ::spa-deploy/v1 has been removed."
        echo "Please upgrade to spa-deploy/v2." >> $GITHUB_STEP_SUMMARY
        echo "Example patch: https://github.com/navikt/frontend-golden-path/compare/242b9cd52fa9edb5c9b76acd13eb0e5f5f8740b0...474055584c1abdcb271133f9cab283eaa7b0ebe6" >> $GITHUB_STEP_SUMMARY
        exit 1
